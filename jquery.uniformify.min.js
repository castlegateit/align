(function(t){"use strict";var e="uniformify";var i={selector:"> *"};var n;var o={update:"update",reset:"reset"};var s=function(n,o){this.element=n;this.settings=t.extend({},i,o);this._defaults=i;this._name=e;this.init()};s.prototype.init=function(){var e=this;this.select();this.save();t(window).on("load resizeDone",function(){e.align()})};s.prototype.select=function(){this.boxes=t(this.element).find(this.settings.selector)};s.prototype.save=function(){this.boxes.each(function(e,i){var n=t(i);if(n.attr("style")&&!n.data("style")){n.data("style",n.attr("style"))}})};s.prototype.reset=function(){this.naturalize();this.boxes.each(function(e,i){var n=t(i);if(n.data("style")){return n.attr("style",n.data("style"))}n.removeAttr("style")})};s.prototype.naturalize=function(){this.boxes.each(function(e,i){t(i).height("auto")})};s.prototype.align=function(){var e=this.boxes;var i=[];this.naturalize();e.each(function(n,o){var s=t(o);var a=0;var r=s.add(e.not(s).filter(function(){return s.offset().top===t(this).offset().top}));if(r.length===1||t.inArray(o,i)!==-1){return}r.each(function(e,n){var o=t(n);var s=o.height();if(s>a){a=s}i.push(n)});r.each(function(e,i){t(i).height(a)})})};s.prototype.update=function(){this.select();this.save();this.align()};t.fn[e]=function(i){return this.each(function(){var n=t.data(this,e);if(typeof i==="string"){if(typeof n==="undefined"||typeof o[i]==="undefined"){return false}return n[o[i]]()}if(!n){t.data(this,e,new s(this,i))}})};t(window).on("resize",function(){window.clearTimeout(n);n=window.setTimeout(function(){t(window).trigger("resizeDone")},50)})})(jQuery);
