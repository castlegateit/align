(function(t){"use strict";var e="uniformify";var i={selector:"> *"};var n;var o={update:"update",reset:"reset"};var r=function(n,o){this.element=n;this.settings=t.extend({},i,o);this._defaults=i;this._name=e;this.init()};r.prototype.init=function(){var e=this;this.select();t(window).on("load resizeDone",function(){e.align()})};r.prototype.select=function(){this.boxes=t(this.element).find(this.settings.selector);this.save()};r.prototype.save=function(){this.boxes.each(function(e,i){var n=t(i);if(n.attr("style")&&!n.data("style")){n.data("style",n.attr("style"))}})};r.prototype.reset=function(){this.naturalize();this.boxes.each(function(e,i){var n=t(i);if(n.data("style")){return n.attr("style",n.data("style"))}n.removeAttr("style")})};r.prototype.naturalize=function(){this.boxes.each(function(e,i){t(i).height("auto")})};r.prototype.align=function(){var e=this.boxes;var i=[];this.naturalize();e.each(function(n,o){var r=t(o);var s=0;var a=r.add(e.not(r).filter(function(){return r.offset().top===t(this).offset().top}));if(a.length===1||t.inArray(o,i)!==-1){return}a.each(function(e,n){var o=t(n);var r=o.height();if(o.css("box-sizing")==="border-box"){r=o.outerHeight()}if(r>s){s=r}i.push(n)});a.each(function(e,i){var n=t(i);if(n.css("box-sizing")==="border-box"){return n.outerHeight(s)}return n.height(s)})})};r.prototype.update=function(){this.select();this.align()};t.fn[e]=function(i){return this.each(function(){var n=t.data(this,e);if(typeof i==="string"){if(typeof n==="undefined"||typeof o[i]==="undefined"){return false}return n[o[i]]()}if(!n){t.data(this,e,new r(this,i))}})};t(window).on("resize",function(){window.clearTimeout(n);n=window.setTimeout(function(){t(window).trigger("resizeDone")},50)})})(jQuery);
